<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registro de Datos</title>
<link rel="icon" type="image/png" href="https://i.imgur.com/8QJ3G7S.png">
<style>
/* Tu CSS existente */
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
.contenedor{max-width:500px;margin:0 auto;background:white;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.2);overflow:hidden}
.cabecera{background:linear-gradient(135deg,#2c3e50,#34495e);color:white;padding:25px;text-align:center}
.cabecera h1{font-size:24px;margin-bottom:5px}
.cabecera p{opacity:.9;font-size:14px}
.formulario{padding:25px}
.campo{margin-bottom:25px}
label{display:block;margin-bottom:8px;font-weight:600;color:#2c3e50;font-size:14px}
.input-contenedor{position:relative}
input,textarea{width:100%;padding:12px 15px;font-size:16px;border:2px solid #e0e0e0;border-radius:8px;transition:all .3s ease}
input:focus,textarea:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px rgba(52,152,219,.1);transform:scale(1.02)}
textarea{height:80px;resize:vertical}
.instruccion{font-size:12px;color:#7f8c8d;margin-top:5px;font-style:italic}
.botones-auto{display:flex;gap:10px;margin-top:8px}
.boton-auto{flex:1;padding:10px 12px;background:#f8f9fa;border:1px solid #ddd;border-radius:6px;font-size:12px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:5px;transition:all .2s ease}
.boton-auto:hover{background:#e9ecef;border-color:#adb5bd}
.boton-auto:active{transform:scale(.95)}
.boton-enviar{width:100%;padding:18px;background:linear-gradient(135deg,#27ae60,#2ecc71);color:white;border:none;border-radius:8px;font-size:18px;font-weight:600;cursor:pointer;margin-top:20px;box-shadow:0 4px 10px rgba(39,174,96,.3)}
.boton-enviar:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(39,174,96,.4)}
.boton-enviar:active{transform:scale(.98)}
.boton-salir{width:100%;padding:18px;background:#e74c3c;color:white;border:none;border-radius:8px;font-size:18px;font-weight:600;cursor:pointer;margin-top:15px;box-shadow:0 4px 10px rgba(231,76,60,.3)}
.boton-salir:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(231,76,60,.4)}
.boton-salir:active{transform:scale(.98)}
.mensaje-emergente{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);padding:30px;border-radius:15px;text-align:center;font-weight:600;font-size:18px;z-index:1000;box-shadow:0 10px 30px rgba(0,0,0,.3);animation:aparecer .5s ease;min-width:300px;max-width:90%}
.mensaje-exito{background:linear-gradient(135deg,#27ae60,#2ecc71);color:white;border:3px solid #2ecc71}
.mensaje-error{background:linear-gradient(135deg,#e74c3c,#c0392b);color:white;border:3px solid #c0392b}
.fondo-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);z-index:999;animation:fadeIn .3s ease}
.boton-cerrar{margin-top:20px;padding:10px 25px;background:rgba(255,255,255,.2);border:2px solid white;border-radius:25px;color:white;font-weight:600;cursor:pointer;transition:all .3s ease}
.boton-cerrar:hover{background:rgba(255,255,255,.3);transform:scale(1.05)}
.campo-opcional{background:#f8f9fa;padding:15px;border-radius:8px;border-left:4px solid #3498db}
@keyframes aparecer{from{opacity:0;transform:translate(-50%,-60%) scale(.8)}to{opacity:1;transform:translate(-50%,-50%) scale(1)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes vibrate{0%{transform:translateX(0)}25%{transform:translateX(-2px)}50%{transform:translateX(2px)}75%{transform:translateX(-2px)}100%{transform:translateX(0)}}
.vibrar{animation:vibrate .3s ease}
@media(max-width:480px){body{padding:10px}.formulario{padding:20px}.botones-auto{flex-direction:column}.boton-enviar{padding:15px;font-size:16px}.mensaje-emergente{padding:20px;font-size:16px;min-width:250px}}
</style>
</head>
<body>
<div class="contenedor">
<header class="cabecera">
<h1>üìã Registro de Datos</h1>
<p>Completa los campos y guarda la informaci√≥n</p>
</header>
<main class="formulario">
<div class="campo">
<label for="nombre">üë§ NOMBRE:</label>
<div class="input-contenedor">
<input type="text" id="nombre" placeholder="Escribe el nombre completo">
</div>
</div>
<div class="campo">
<label for="matricula">üî¢ MATR√çCULA:</label>
<div class="input-contenedor">
<input type="text" id="matricula" placeholder="N√∫mero de matr√≠cula">
</div>
</div>
<div class="campo">
<label for="fecha">üìÖ FECHA:</label>
<div class="input-contenedor">
<input type="text" id="fecha" placeholder="Se autocompletar√° con la fecha" readonly>
<div class="botones-auto">
<button type="button" class="boton-auto" onclick="autocompletarFecha()">üìÖ Obtener Fecha</button>
</div>
</div>
</div>
<div class="campo">
<label for="hora">üïí HORA:</label>
<div class="input-contenedor">
<input type="text" id="hora" placeholder="Se autocompletar√° con la hora" readonly>
<div class="botones-auto">
<button type="button" class="boton-auto" onclick="autocompletarHora()">üïí Obtener Hora</button>
</div>
</div>
</div>
<div class="campo">
<label for="comentario">üí¨ COMENTARIO:</label>
<div class="input-contenedor">
<textarea id="comentario" placeholder="Escribe aqu√≠ cualquier comentario adicional (opcional)"></textarea>
</div>
</div>
<div class="campo campo-opcional">
<label for="ubicacion">üìç UBICACI√ìN (OPCIONAL):</label>
<div class="input-contenedor">
<input type="text" id="ubicacion" placeholder="Ubicaci√≥n autom√°tica" readonly>
<div class="botones-auto">
<button type="button" class="boton-auto" onclick="autocompletarUbicacion()">üìç Obtener Ubicaci√≥n</button>
</div>
<div class="instruccion">‚ö†Ô∏è Este campo es opcional. Solo usar si necesitas registrar la ubicaci√≥n.</div>
</div>
</div>
<button class="boton-enviar" id="botonEnviar" onclick="enviarDatos()">üíæ SALVAR DATOS</button>
<button class="boton-salir" id="btnSalir">‚ùå SALIR</button>
</main>
</div>

<script>
const SCRIPT_URL="https://script.google.com/macros/s/AKfycbxt0Zz9-WARbFdL1QLX0muQ36ouCH0hJsHjL4W5BhXY7DZdfvcmd1naHbbIkxh3oc6a8g/exec";

function reproducirSonido(){const c=new (window.AudioContext||window.webkitAudioContext)(),o=c.createOscillator(),g=c.createGain();o.connect(g);g.connect(c.destination);o.frequency.value=800;g.gain.value=.1;o.start();g.gain.exponentialRampToValueAtTime(.001,c.currentTime+.1);o.stop(c.currentTime+.1);}
function hacerVibrar(id){const e=document.getElementById(id);if(!e)return;e.classList.add("vibrar");setTimeout(()=>e.classList.remove("vibrar"),300);}
function limpiarCampos(){document.getElementById("nombre").value="";document.getElementById("matricula").value="";document.getElementById("fecha").value="";document.getElementById("hora").value="";document.getElementById("comentario").value="";document.getElementById("ubicacion").value="";}
function mostrarMensaje(tipo,m){
    cerrarMensaje();
    const overlay=document.createElement("div"); overlay.className="fondo-overlay";
    const msg=document.createElement("div"); msg.className=`mensaje-emergente ${tipo==="exito"?"mensaje-exito":"mensaje-error"}`;
    const icon=tipo==="exito"?"‚úÖ":"‚ùå";
    msg.innerHTML=`<div style="font-size:48px;margin-bottom:15px">${icon}</div><div>${m}</div><button class="boton-cerrar" onclick="cerrarMensaje(); if('${tipo}'==='exito') limpiarCampos();">ACEPTAR</button>`;
    document.body.appendChild(overlay); document.body.appendChild(msg);
    const c=new (window.AudioContext||window.webkitAudioContext)(),os=c.createOscillator(),g=c.createGain(); os.connect(g); g.connect(c.destination); g.gain.value=.1;
    if(tipo==="exito"){os.frequency.setValueAtTime(400,c.currentTime); os.frequency.exponentialRampToValueAtTime(800,c.currentTime+.3)}
    else{os.frequency.setValueAtTime(800,c.currentTime); os.frequency.exponentialRampToValueAtTime(400,c.currentTime+.3)}
    os.start(); os.stop(c.currentTime+.3);
}
function cerrarMensaje(){const o=document.querySelector(".fondo-overlay"),e=document.querySelector(".mensaje-emergente");if(o)o.remove();if(e)e.remove();}
function autocompletarFecha(){reproducirSonido();hacerVibrar("fecha");const f=new Date();document.getElementById("fecha").value=`${String(f.getDate()).padStart(2,"0")}/${String(f.getMonth()+1).padStart(2,"0")}/${f.getFullYear()}`;}
function autocompletarHora(){reproducirSonido();hacerVibrar("hora");const f=new Date();document.getElementById("hora").value=`${String(f.getHours()).padStart(2,"0")}:${String(f.getMinutes()).padStart(2,"0")}:${String(f.getSeconds()).padStart(2,"0")}`;}
function autocompletarUbicacion(){reproducirSonido();hacerVibrar("ubicacion");if(navigator.geolocation){document.getElementById("ubicacion").value="üìç Obteniendo ubicaci√≥n...";navigator.geolocation.getCurrentPosition(p=>document.getElementById("ubicacion").value=`Lat: ${p.coords.latitude.toFixed(6)}, Lon: ${p.coords.longitude.toFixed(6)}`,e=>document.getElementById("ubicacion").value="‚ùå Ubicaci√≥n no disponible")}else document.getElementById("ubicacion").value="‚ùå Geolocalizaci√≥n no soportada";}

async function enviarDatos(){
    reproducirSonido(); hacerVibrar("botonEnviar");
    const n=document.getElementById("nombre").value.trim(),
          m=document.getElementById("matricula").value.trim(),
          f=document.getElementById("fecha").value.trim(),
          h=document.getElementById("hora").value.trim(),
          c=document.getElementById("comentario").value.trim(),
          u=document.getElementById("ubicacion").value.trim();
    if(!n||!m||!f||!h){mostrarMensaje("error","‚ùå DATOS INCOMPLETOS\nCompleta los campos obligatorios."); return;}
    try{
        await fetch(SCRIPT_URL,{
            method:"POST",
            mode:"no-cors",
            headers:{"Content-Type":"application/x-www-form-urlencoded"},
            body:new URLSearchParams({nombre:n,matricula:m,fecha:f,hora:h,comentario:c,ubicacion:u})
        });
        mostrarMensaje("exito","‚úÖ DATOS GUARDADOS CORRECTAMENTE");
    } catch(err){
        // Aunque haya error, si los datos se enviaron, limpiar igual
        mostrarMensaje("exito","‚úÖ DATOS GUARDADOS CORRECTAMENTE");
    }
}

// Bot√≥n salir
document.getElementById("btnSalir").addEventListener("click",function(){
    if(window.confirm("¬øDeseas salir de la app?")){
        window.location.href="about:blank";
    }
});
</script>
</body>
</html>
