<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registro de Datos</title>
<link rel="icon" type="image/png" href="https://i.imgur.com/8QJ3G7S.png">
<style>
/* Estilos CSS resumidos */
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
.contenedor{max-width:500px;margin:0 auto;background:white;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.2);overflow:hidden}
.cabecera{background:linear-gradient(135deg,#2c3e50,#34495e);color:white;padding:25px;text-align:center}
.formulario{padding:25px}
.campo{margin-bottom:25px}
label{display:block;margin-bottom:8px;font-weight:600;color:#2c3e50;font-size:14px}
input,textarea{width:100%;padding:12px 15px;font-size:16px;border:2px solid #e0e0e0;border-radius:8px;transition:all .3s ease}
textarea{height:80px;resize:vertical}
.botones-auto{display:flex;gap:10px;margin-top:8px}
.boton-enviar{width:100%;padding:18px;background:linear-gradient(135deg,#27ae60,#2ecc71);color:white;border:none;border-radius:8px;font-size:18px;font-weight:600;cursor:pointer;margin-top:20px}
.boton-salir{width:100%;padding:18px;background:#e74c3c;color:white;border:none;border-radius:8px;font-size:18px;font-weight:600;cursor:pointer;margin-top:15px}
</style>
</head>
<body>
<div class="contenedor">
<header class="cabecera">
<h1>ğŸ“‹ Registro de Datos</h1>
<p>Completa los campos y guarda la informaciÃ³n</p>
</header>
<main class="formulario">
<div class="campo">
<label for="nombre">ğŸ‘¤ NOMBRE:</label>
<input type="text" id="nombre" placeholder="Escribe el nombre completo">
</div>
<div class="campo">
<label for="matricula">ğŸ”¢ MATRÃCULA:</label>
<input type="text" id="matricula" placeholder="NÃºmero de matrÃ­cula">
</div>
<div class="campo">
<label for="fecha">ğŸ“… FECHA:</label>
<input type="text" id="fecha" placeholder="Se autocompletarÃ¡ con la fecha" readonly>
<button type="button" onclick="autocompletarFecha()">ğŸ“… Obtener Fecha</button>
</div>
<div class="campo">
<label for="hora">ğŸ•’ HORA:</label>
<input type="text" id="hora" placeholder="Se autocompletarÃ¡ con la hora" readonly>
<button type="button" onclick="autocompletarHora()">ğŸ•’ Obtener Hora</button>
</div>
<div class="campo">
<label for="comentario">ğŸ’¬ COMENTARIO:</label>
<textarea id="comentario" placeholder="Escribe aquÃ­ cualquier comentario adicional (opcional)"></textarea>
</div>
<div class="campo">
<label for="ubicacion">ğŸ“ UBICACIÃ“N (OPCIONAL):</label>
<input type="text" id="ubicacion" placeholder="UbicaciÃ³n automÃ¡tica" readonly>
<button type="button" onclick="autocompletarUbicacion()">ğŸ“ Obtener UbicaciÃ³n</button>
</div>
<button class="boton-enviar" id="botonEnviar" onclick="enviarDatos()">ğŸ’¾ SALVAR DATOS</button>
<button class="boton-salir" id="btnSalir">âŒ SALIR</button>
</main>
</div>

<script>
const SCRIPT_URL="https://script.google.com/macros/s/AKfycbwzPZfnePLK_vUMmiqY901I6L-jAZdUQVP4xs-jDAS0ARziKBgdFIKMGwFH7r4us0aeNw/exec";

function autocompletarFecha(){
    const f=new Date();
    document.getElementById("fecha").value=`${String(f.getDate()).padStart(2,"0")}/${String(f.getMonth()+1).padStart(2,"0")}/${f.getFullYear()}`;
}
function autocompletarHora(){
    const f=new Date();
    document.getElementById("hora").value=`${String(f.getHours()).padStart(2,"0")}:${String(f.getMinutes()).padStart(2,"0")}:${String(f.getSeconds()).padStart(2,"0")}`;
}
function autocompletarUbicacion(){
    if(navigator.geolocation){
        document.getElementById("ubicacion").value="ğŸ“ Obteniendo ubicaciÃ³n...";
        navigator.geolocation.getCurrentPosition(
            p=>document.getElementById("ubicacion").value=`Lat: ${p.coords.latitude.toFixed(6)}, Lon: ${p.coords.longitude.toFixed(6)}`,
            e=>document.getElementById("ubicacion").value="âŒ UbicaciÃ³n no disponible"
        );
    } else {
        document.getElementById("ubicacion").value="âŒ GeolocalizaciÃ³n no soportada";
    }
}

async function enviarDatos(){
    const n=document.getElementById("nombre").value.trim(),
          m=document.getElementById("matricula").value.trim(),
          f=document.getElementById("fecha").value.trim(),
          h=document.getElementById("hora").value.trim(),
          c=document.getElementById("comentario").value.trim(),
          u=document.getElementById("ubicacion").value.trim();
    if(!n||!m||!f||!h){
        alert("âŒ DATOS INCOMPLETOS. Completa los campos obligatorios.");
        return;
    }
    try{
        await fetch(SCRIPT_URL,{
            method:"POST",
            mode:"no-cors",
            headers:{"Content-Type":"application/x-www-form-urlencoded"},
            body:new URLSearchParams({nombre:n,matricula:m,fecha:f,hora:h,comentario:c,ubicacion:u})
        });
        alert("âœ… DATOS GUARDADOS CORRECTAMENTE");
    } catch(err){
        alert("âŒ ERROR AL GUARDAR LOS DATOS");
    }
}

// BotÃ³n salir
document.getElementById("btnSalir").addEventListener("click",function(){
    if(window.confirm("Â¿Deseas salir de la app?")){
        window.location.href="about:blank";
    }
});
</script>
</body>
</html>